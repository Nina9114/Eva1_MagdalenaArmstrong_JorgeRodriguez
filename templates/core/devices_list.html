{% extends 'base.html' %}
{% block content %}
<h3>Devices</h3>

<form method="get" class="row g-2 mb-3">
  <div class="col-auto">
    <select name="category" class="form-select">
      <option value="">-- All categories --</option>
      {% for c in categories %}
        <option value="{{ c.id }}" {% if selected_category == c.id %}selected{% endif %}>{{ c.name }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-auto">
    <button class="btn btn-dark">Apply</button>
    <a class="btn btn-outline-secondary" href="{% url 'devices_list' %}">Clear</a>
  </div>
</form>

<div class="table-responsive">
<table class="table">
  <thead><tr><th>Name</th><th>Category</th><th>Zone</th><th></th></tr></thead>
  <tbody>
    {% for d in devices %}
      <tr>
        <td>{{ d.name }}</td>
        <td>{{ d.category.name }}</td>
        <td>{{ d.zone.name }}</td>
        <td><a href="{% url 'device_detail' d.id %}">Detail</a></td>
      </tr>
    {% empty %}
      <tr><td colspan="4" class="text-muted">No devices found</td></tr>
    {% endfor %}
  </tbody>
</table>
</div>
{% endblock %}
